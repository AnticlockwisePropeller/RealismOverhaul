// LR-79

@PART[bluedog_Juno_EngineS3D]:FOR[RealismOverhaul]:NEEDS[Bluedog_DB]
{
	%RSSROConfig = True
	%rescaleFactor = 1.54989
	@crashTolerance = 10
	@maxTemp = 673.15
	%skinTemp = 773.15
	
	@MODULE[ModuleEngines*]
	{
		@name = ModuleEnginesRF
	}

	@tags = juno juno-ii rocketdyne s3 s-3 s-3d
	
	%engineType = LR79
	%engineTypeMult = 1
}

// LR-79 + Verniers

@PART[bluedog_thorEngine]:FOR[RealismOverhaul]:NEEDS[Bluedog_DB]
{
	%RSSROConfig = True
	%rescaleFactor = 1.6253
	@mass = 0.945
	@crashTolerance = 10
	@maxTemp = 873.15
	%skinMaxTemp = 973.15

	// Main engine
	@MODULE[ModuleEngines*]:HAS[#thrustVectorTransformName[thrustTransform]]
	{
		@name = ModuleEnginesRF
		engineID = Engine
	}
	
	// Main engine gimbal
	@MODULE[ModuleGimbal]:HAS[#gimbalTransformName[thrustTransform]]
	{
		!gimbalRange = DEL // just in case
		%gimbalRange = 8 // 10
		%useGimbalResponseSpeed = true
		%gimbalResponseSpeed = 16
	}
	
	// Delete verniers (temp)
	//!MODULE[ModuleEngines*]:HAS[#thrustVectorTransformName[vernierTransform]]{}
	//!MODULE[ModuleGimbal]:HAS[#gimbalVectorTransformName[vernierTransform]]{}
	
	!MODULE[ModuleEngineConfigs] {}
	%engineType = LR79
	%engineTypeMult = 1
	%massOffset = 0.198 // 0.15 (guess) skirt + 2 * 0.024 verniers
}

@PART[bluedog_thorEngine]:AFTER[RealismOverhaulEnginesPost]:NEEDS[Bluedog_DB]
{
	%title = Thor/Delta LR-79 Series + LR-101 Verniers
	
	// Verniers
	@MODULE[ModuleEngines*]:HAS[#thrustVectorTransformName[vernierTransform]]
	{
		@name = ModuleEnginesRF
		%engineID = Vernier
		@minThrust = 10.2288 // 2 * 5.1144
		@maxThrust = 10.2288
		@heatProduction = 0
		
		@PROPELLANT[LiquidFuel]
		{
			@name = Kerosene
			@ratio = 0.3821
			@DrawGauge = False
		}
		
		@PROPELLANT[Oxidizer]
		{
			@name = LqdOxygen
			@ratio = 0.6179
		}
		
		!atmosphereCurve,* {}
		atmosphereCurve
		{
			key = 0 238
			key = 1 207
		}
		
		!IGNITOR_RESOURCE,* {}
		IGNITOR_RESOURCE
		{
			name = ElectricCharge
			amount = 0.25
		}
		
		%ullage = True
		%pressureFed = False
		%ignitions = 1
	}
	
	// Vernier gimbal
	@MODULE[ModuleGimbal]:HAS[#gimbalTransformName[vernierTransform]]
	{
		@gimbalRange = 45
		%useGimbalResponseSpeed = True
		%gimbalResponseSpeed = 16
	}
	
	// Vernier engine config
	MODULE
	{
		name = ModuleEngineConfigs
		type = ModuleEnginesFX
		engineID = Vernier
		isMaster = False
		modded = false
		configuration = LR101-NA-3

		CONFIG
		{
			name = LR101-NA-3
			minThrust = 10.2288
			maxThrust = 10.2288
			heatProduction = 0
			ullage = True
			pressureFed = False
			ignitions = 1
			
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.25
			}

			PROPELLANT
			{
				name = Kerosene
				ratio = 0.3821
				DrawGauge = False
			}

			PROPELLANT
			{
				name = LqdOxygen
				ratio = 0.6179
			}

			atmosphereCurve
			{
				key = 0 238
				key = 1 207
			}
		}
	}
}

@PART[bluedog_thorEngine]:FOR[zTestFlight]:NEEDS[Bluedog_DB]
{
	// Verniers TF
	@TESTFLIGHT:HAS[#name[LR101-NA-3]]
	{
		clusterMultiplier = 2
	}
}
